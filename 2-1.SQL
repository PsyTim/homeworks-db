CREATE TABLE IF NOT EXISTS Artist (
	ArtistID SERIAL PRIMARY KEY, 
	Name VARCHAR(40) NOT NULL
);

CREATE TABLE IF NOT EXISTS Genre (
	GenreID SERIAL PRIMARY KEY,
	Name VARCHAR(40) NOT NULL
);

CREATE TABLE IF NOT EXISTS ArtistGenre (
	ArtistID INTEGER REFERENCES Artist(ArtistID),
	GenreID INTEGER REFERENCES Genre(GenreID),
	CONSTRAINT ArtistGenreID PRIMARY KEY (ArtistID, GenreID)
);

CREATE TABLE IF NOT EXISTS Album (
	AlbumID SERIAL PRIMARY KEY, 
	Title VARCHAR(40) NOT NULL,
	Year SMALLINT NOT NULL
);

CREATE TABLE IF NOT EXISTS ArtistAlbum (
	ArtistID INTEGER REFERENCES Artist(ArtistID),
	AlbumID INTEGER REFERENCES Album(AlbumID),
	CONSTRAINT ArtistAlbumID PRIMARY KEY (ArtistID, AlbumID)
);

CREATE TABLE IF NOT EXISTS Track (
	TrackID SERIAL PRIMARY KEY, 
	Title VARCHAR(40) NOT NULL,
	Duration SMALLINT NOT NULL,
	AlbumID INTEGER NOT NULL REFERENCES Album(AlbumID)
);

CREATE TABLE IF NOT EXISTS Collection (
	CollectionID SERIAL PRIMARY KEY, 
	Title VARCHAR(40) NOT NULL,
	Year SMALLINT NOT NULL
);

CREATE TABLE IF NOT EXISTS TrackCollection (
	TrackID INTEGER REFERENCES Track(TrackID),
	CollectionID INTEGER REFERENCES Collection(CollectionID),
	CONSTRAINT TrackCollectionID PRIMARY KEY (TrackID, CollectionID)
);
